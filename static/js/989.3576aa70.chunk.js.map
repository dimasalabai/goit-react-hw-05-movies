{"version":3,"file":"static/js/989.3576aa70.chunk.js","mappings":"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","sources":["api/movies.js","webpack://react-homework-template/./src/components/GoBack/go-back.module.css?0851","components/GoBack/GoBack.jsx","webpack://react-homework-template/./src/pages/Movies/movies.module.css?e50d","webpack://react-homework-template/./src/pages/Movies/SearchMovies/search-movies.module.css?ff90","pages/Movies/SearchMovies/SearchMovies.jsx","pages/Movies/Movies.jsx"],"sourcesContent":["import axios from 'axios';\n\nconst instance = axios.create({\n  baseURL: 'https://api.themoviedb.org',\n  params: {\n    api_key: '68860e7024beff1d4722639f018ec6ec',\n  },\n});\n\nexport const getAllMovies = () => {\n  return instance.get('/3/trending/movie/day');\n};\n\nexport const getCurrentMovie = id => {\n  return instance.get(`/3/movie/${id}`);\n};\n\nexport const getSearchMovie = search => {\n  return instance.get(`/3/search/movie`, {\n    params: {\n      query: search,\n      page: 1,\n    },\n  });\n};\n\nexport const getCats = id => {\n  return instance.get(`/3/movie/${id}/credits`);\n};\n\nexport const getReviews = id => {\n  return instance.get(`/3/movie/${id}/reviews`);\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"linkBack\":\"go-back_linkBack__iAPC5\"};","import { useNavigate } from 'react-router-dom';\n\nimport styles from './go-back.module.css';\n\nconst GoBack = ({ locationFrom }) => {\n  const navigate = useNavigate();\n\n  return (\n    <button\n      onClick={() => navigate(locationFrom)}\n      type=\"button\"\n      className={styles.linkBack}\n    >\n      Go back\n    </button>\n  );\n};\nexport default GoBack;\n","// extracted by mini-css-extract-plugin\nexport default {\"list\":\"movies_list__ZyEjX\",\"item\":\"movies_item__bjHKk\",\"link\":\"movies_link__m1ktW\",\"movieImg\":\"movies_movieImg__768y1\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"search-movies_container__yxKwU\",\"title\":\"search-movies_title__4CpCD\",\"form\":\"search-movies_form__r3FVz\",\"formButton\":\"search-movies_formButton__QnLnl\",\"formButtonLabel\":\"search-movies_formButtonLabel__20Gye\",\"input\":\"search-movies_input__Id5cR\"};","import { useState } from 'react';\n\nimport styles from './search-movies.module.css';\nconst SearchMovies = ({ onSubmit }) => {\n  const [state, setState] = useState({\n    search: '',\n  });\n\n  const handleChange = ({ target }) => {\n    const { name, value } = target;\n    setState({\n      ...state,\n      [name]: value,\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    onSubmit({ ...state }); // викликається handleSearch\n    setState({\n      search: '',\n    });\n  };\n\n  return (\n    <div className={styles.container}>\n      <form onSubmit={handleSubmit} className={styles.form}>\n        <button type=\"submit\" className={styles.formButton}>\n          <span className={styles.formButtonLabel}>Search</span>\n        </button>\n\n        <input\n          value={state.search}\n          name=\"search\"\n          onChange={handleChange}\n          className={styles.input}\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search movies\"\n          required\n        />\n      </form>\n    </div>\n  );\n};\nexport default SearchMovies;\n","import { useState, useEffect } from 'react';\n\nimport { Link, useSearchParams, useLocation } from 'react-router-dom';\n\nimport styles from './movies.module.css';\nimport emptyPoster from '../../images/emptyPoster.png';\nimport { getSearchMovie } from 'api/movies';\n\nimport SearchMovies from './SearchMovies/SearchMovies';\n\nimport Loader from 'components/Loader/Loader';\nimport GoBack from 'components/GoBack/GoBack';\n\nconst Movies = () => {\n  // const [search, setSearch] = useState('');\n  const [movies, setMovies] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  const [searchParams, setSearchParams] = useSearchParams(); //1 відслідковує, коли адресний рядок змінюється\n  const search = searchParams.get('search'); //2 беремо праметр search з адресного рядка і записуємо в змінну\n\n  const location = useLocation();\n\n  useEffect(() => {\n    const fetchMovies = async () => {\n      try {\n        setLoading(true);\n        const {\n          data: { results },\n        } = await getSearchMovie(search);\n\n        setMovies(results);\n      } catch (error) {\n        setError(error.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (search) {\n      // 4 робимо пошук, коли не пустий адресний рядок з параметром search\n      fetchMovies();\n    }\n  }, [search]);\n\n  const handleSearch = ({ search }) => {\n    // setSearch(search); // тут передає рядок пошуку в локальний стейт\n    setSearchParams({ search }); //3 передає рядок пошуку форми в адресний рядок (повністю перезаписує рядок параметрів)\n    setMovies([]);\n  };\n\n  const elements = movies.map(({ id, title, poster_path }) => (\n    <li key={id} className={styles.item}>\n      <img\n        src={\n          poster_path\n            ? `https://image.tmdb.org/t/p/w500/${poster_path}`\n            : emptyPoster\n        }\n        alt=\"\"\n        className={styles.movieImg}\n      />\n      <Link\n        to={`/movies/${id}`}\n        state={{ from: location }}\n        className={styles.link}\n      >\n        <p className={styles.title}>{title}</p>\n      </Link>\n    </li>\n  ));\n\n  return (\n    <>\n      <div className=\"container\">\n        <GoBack locationFrom={-1} />\n        <SearchMovies onSubmit={handleSearch} />\n\n        {error && <p className={styles.error}>{error}</p>}\n        {loading && <Loader />}\n        {!!elements.length && <ul className={styles.list}>{elements}</ul>}\n      </div>\n    </>\n  );\n};\nexport default Movies;\n"],"names":["instance","axios","baseURL","params","api_key","getAllMovies","get","getCurrentMovie","id","concat","getSearchMovie","search","query","page","getCats","getReviews","_ref","locationFrom","navigate","useNavigate","_jsx","onClick","type","className","styles","children","onSubmit","_useState","useState","_useState2","_slicedToArray","state","setState","_jsxs","e","preventDefault","_objectSpread","value","name","onChange","_ref2","target","_defineProperty","autoComplete","autoFocus","placeholder","required","movies","setMovies","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","_useSearchParams","useSearchParams","_useSearchParams2","searchParams","setSearchParams","location","useLocation","useEffect","fetchMovies","_asyncToGenerator","_regeneratorRuntime","_callee","_yield$getSearchMovie","results","_context","prev","next","sent","data","t0","message","finish","stop","apply","arguments","elements","map","_ref3","title","poster_path","src","emptyPoster","alt","Link","to","from","_Fragment","GoBack","SearchMovies","Loader","length"],"sourceRoot":""}